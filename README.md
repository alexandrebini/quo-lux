# README

### Demo
https://quo-lux.herokuapp.com/
user: demo@demo.com
passwd: 1234567


### Models
- `User`: basic login, generated by devise. 
- `Product`: stores the product info. As I want to avoid scrapping the same product over and over again, multiple groups can use the same product.
- `Group`: The competitors monitor `group`.
- `Competitor`: Relates `group` with `product`.


### Tracking
- For scrapping product attributes I'm using Watir. It's really easy to add new attributes. Examples here: https://github.com/alexandrebini/quo-lux/tree/master/lib/amazon.
- There are some control attributes on Product:
  * `status`: stores the current status of the product. `pending` when the product is created and needs to be fetched, `fetching` when the fetch job is running and `ready` when the product has all required attributes (title price rank reviews_count)
  * `last_fetched_at`: stores the last time that the product was fetched 
  * `last_fetch_status`: store the last fetch status 
  * `last_fetch_log`: store the last fetch log, useful for errors
- I assumed that when an attribute comes empty from amazon, it should not replace what is already saved
- Using papertrail for versioning


### Notifications
When the product is updated and `features`, `images`, `inventory`, `price`, `rank`, `reviews_count` or `title` changes, we deliver an notification showing this differences to each user that are monitoring this product.


### Tasks
- `rails products:fetch`: Fetch all products and delivers notifications.
